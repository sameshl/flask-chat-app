<html>
<head>
<title>Chat Room</title>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
<script type="text/javascript">
$(document).ready(function() {
	// create a new namespace for private chat
	var private_socket = io('http://127.0.0.1:5000/private')
	
	$('#send_user_profile_id').on('click', function() {
		user_profile_id = $('#user_profile_id').val()
		private_socket.emit('user_profile_id', user_profile_id);
	});

	$('#send_private_message').on('click', function() {
		var recipient_profile_id = $('#send_to_user_profile_id').val();
		var message_to_send = $('#private_message').val();
		var jwt_token = "add_the_sender's_jwt_token_here"
		var payload = {
			'recipient_profile_id': recipient_profile_id,
			'message': message_to_send,
			'jwt_token': jwt_token
		}
		private_socket.emit('private_message', payload);
	});

	private_socket.on('new_private_message', function(data_received) {
		alert(`${data_received.message}`);
	});
});
</script>
<br>
<br>
<input type="text" id="user_profile_id">
<button id="send_user_profile_id">First send Your User Profile ID To the Server to register yourself</button>
<br>
<br>
Send to person's user profile id: <input type="text" id="send_to_user_profile_id">
Message: <input type="text" id="private_message">
<button id="send_private_message">Send</button>
</body>
</html>