<html>
<head>
<title>Chat Room</title>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
<script type="text/javascript">
$(document).ready(function() {

	var socket = io.connect('http://127.0.0.1:5000');

	// socket.on('connect', function() {
	// 	socket.send('User has connected!');
	// });

	socket.on('message', function(msg) {
		$("#messages").append('<li>'+msg+'</li>');
		console.log('Received message');
	});

	$('#sendbutton').on('click', function() {
		socket.send($('#myMessage').val());
		$('#myMessage').val('');
	});

	// create a new namespace for private chat
	var private_socket = io('http://127.0.0.1:5000/private')
	
	$('#send_username').on('click', function() {
		private_socket.emit('username', $('#username').val());
	});

	$('#send_private_message').on('click', function() {
		var recipient = $('#send_to_username').val();
		var message_to_send = $('#private_message').val();
		private_socket.emit('private_message',{'username': recipient, 'message': message_to_send});
	});

	private_socket.on('new_private_message', function(msg) {
		alert(msg);
	});
});
</script>
<!-- <ul id="messages">
	{% for msg in messages %}
		<li>{{ msg.message }}</li>
	{% endfor %}
</ul> -->
<br>
<br>
Send to: <input type="text" id="send_to_username">
Message: <input type="text" id="private_message">
<button id="send_private_message">Send</button>

<br>
<br>
<input type="text" id="username">
<button id="send_username">Send Username</button>

<input type="text" id="myMessage">
<button id="sendbutton">Send Message</button>
</body>
</html>